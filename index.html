<!DOCTYPE HTML>
<html>
  <head>
    <script type="text/javascript" src="http://sukima.github.com/jasmine-all/jasmine-all-min.js"></script>
    <script type="text/javascript" src="http://code.angularjs.org/1.2.9/angular.js"></script>

    <script>
      function Checkout() {
        this._total = 0;
        this.total = function() {
          return this._total;
        };
        this.scan = function() {
          this._total += 50;
        };
      };

      describe("cart total", function() {
        var checkout;

        beforeEach(function() {
          checkout = new Checkout;
        });

        it("returns 0", function() {
          expect(checkout.total()).toEqual(0);
        });

        it("is 50 when a Kiwi is scanned", function() {
          checkout.scan("Kiwi");
          expect(checkout.total()).toEqual(50);
        });

        it("is 100 when two Kiwis are scanned", function() {
          checkout.scan("Kiwi");
          checkout.scan("Kiwi");
          expect(checkout.total()).toEqual(100);
        });
      });

      function CheckoutCtrl() {
        this.checkout = new Checkout;
        this.add = function() {
          this.checkout.scan();
        }
      }

    </script>
  </head>
  <body ng-app>
    <div ng-controller='CheckoutCtrl as app'>
      Total: {{app.checkout.total()}}
      <button ng-click='app.add("Kiwi")'>Add</button>
    </div>
  </body>
</html>

